<% include ../partials/header %>

<nav class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0">
  <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#">Admin</a>
  <form action="/admin/product" class="form-control-dark w-100">
      <input class="form-control form-control-dark w-100" type="text" name="name" id="name" placeholder="Search" aria-label="Search">
  </form>
  <ul class="navbar-nav px-3">
      <li class="nav-item text-nowrap">
      <a class="nav-link" href="logout">Sign out</a>
      </li>
  </ul>
</nav>

<div class="container-fluid">
  <div class="row">
    <nav class="col-md-2 d-none d-md-block bg-light sidebar">
      <div class="sidebar-sticky">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link active" href="/admin/product">
              <span data-feather="home"></span>
              Products
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link " href="/admin/category">
              <span data-feather="archive"></span>
              Categorys
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link " href="/admin/utiliti">
              <span data-feather="sliders"></span>
              Utilities
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/admin/user">
              <span data-feather="users"></span>
              Users
            </a>
          </li>
          <li class="panel panel-default" id="dropdown">
            
            <a class="nav-link" data-toggle="collapse" href="#dropdown-lvl1">
              <span data-feather="shopping-cart"></span>
              Orders
            </a>

            <!-- Dropdown level 1 -->
						<div id="dropdown-lvl1" class="panel-collapse collapse" >
							<div class="panel-body" style="margin-left: 3.5rem;">
								<ul class="nav navbar-nav">
                  <li><a class="nav-link" href="/admin/order/0">Payment pending</a></li>
                  <li><a class="nav-link" href="/admin/order/1">Processing</a></li>
                  <li><a class="nav-link" href="/admin/order/2">Shipped</a></li>
                  <li><a class="nav-link" href="/admin/order/3">Delivering</a></li>
                  <li><a class="nav-link" href="/admin/order/4">Delivered</a></li>
								</ul>
							</div>
						</div>
					</li>
        </ul>
      </div>
    </nav>

    <main role="main" class="col-md-9 ml-sm-auto col-lg-10 pt-3 px-4">
      <div class="container d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
        <h1 class="h2">Products</h1>
        <div class="btn-toolbar mb-2 mb-md-0">
          <button class="btn btn-sm btn-outline-secondary" onclick="Redirect()">
            Add
          </button>
        </div>
      </div>
      <br>

          <div class="table-responsive">
            <table class="table table-striped table-sm">
              <thead>
                <tr>
                  <th>Thumbail</th>
                  <th>Name</th>
                  <th>Price</th>
                  <th>Quantity</th>
                  <th>Status</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <% products.forEach(function(product) {%>
                  <tr>
                    <td><img src="<%=product.img[0]%>" alt="" width="55px" height="55px"></td>
                    <td><%=product.nameproduct%></td>
                    <td><%=Intl.NumberFormat('VN', { style: 'currency', currency: 'VND' }).format(product.price)%></td>          
                    <td><%=product.quantity%></td>   
                    <% if (product.quantity > 0) { %>
                      <td>InStock</td>  
                    <% } else { %>
                      <td>OutStock</td> 
                    <% } %> 
                    <td>
                      <a class="fa fa-eye" href="/admin/product/view-product/<%=product._id%>"></a>
                      <%if (product.__v == 0) {%>
                        <a class="fa fa-plus-square" href="/admin/product/add-product-utiliti/<%=product._id%>"></a>  
                      <%} else if (product.__v == 1) {%>
                        <a class="fa fa-plus-square"></a>  
                      <%}%>
                      <a class="fa fa-edit" href="/admin/product/edit-product/<%=product._id%>"></a> 
                      <a class="fa fa-remove" href="/admin/product/delete-product/<%=product._id%>"></a>
                    </td>
                <% }); %>
              </tbody>
            </table>
            <ul class="pagination pull-right">
              <% for (let i = 1; i <= pages; i++) {%>
                <% if (i == page) {%> 
                  <li class="page-item active"><a class="page-link" href="product?page=<%=i%>"><%=i%></a></li>
                <%} else if (name && page) {%>
                  <li class="page-item"><a class="page-link" href="product?page=<%=i%>&name=<%=name%>"><%=i%></a></li>
                <%} else {%>
                  <li class="page-item"><a class="page-link" href="product?page=<%=i%>"><%=i%></a></li> 
                <%}%> 
              <%}%>
            </ul>
          </div>
        </div>
      </main>
  </div>
</div>

      
      <script type="text/javascript">
           function Redirect() {
              window.location="/admin/product/add-product/";
           }
     </script>

<% include ../partials/footer %>